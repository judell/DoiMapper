<html>
<head>
<link rel="stylesheet" href="https://jonudell.info/hlib/hlib.css">
<script src="https://jonudell.info/hlib/hlib.bundle.js"></script>
<script src="./index.js"></script>
<style>
body { 
  margin: .5in;
  margin-top:.25in;
}
.formContainer {
  border-left: solid;
  border-bottom: solid;
  width: 30%;
  border-left-width: thin;
  border-bottom-width: thin;
  border-color: lightgray;
  padding-left: 20px;  
}
.mappingContainer {
  width:600px;
  height:160px;
}
</style>
</head>
<body>

<h1>DOI-URL annotation mapper</h1>

<div class="formContainer">
  <div class="formField" id="userContainer"></div>
  <div class="formField" id="groupContainer"></div>
  <div class="formField" id="tokenContainer"></div>
</div>

<div class="backstory">

  <h2>What it does</h2>

  <p>
  For each DOI-URL pair, it posts an annotation to the URL 
  that include the same DOI metadata sent by the Hypothesis
  client.
  </p>

  <h2>Why do this?</h2>

  <p>
  This tool was created to solve a particular problem
  for EuropePMC, and to provide a foundation for similar 
  efforts to influence the metadata linkages among 
  annotations that target more than one instance of
  the same document.
  </p>

</div>

<h2>How it works</h2>

<p>
Provide a set of URL-DOI mappings like so:
</p>

<div class="controls">
  <div>
    <p>
      <input type="radio" name="format" value="json"> json
      <input type="radio" name="format" value="url"> url
    </p>
    <textarea id="mapping" class="mappingContainer formField">
[{
  "doi": "10.1006/exnr.2001.7815",
  "url": "http://europepmc.org/abstract/MED/11716570"
  }]

...OR...

https://cors-anywhere.herokuapp.com/http://jonudell.net/data/finalmappings.json
    </textarea>
  </div>
</div>

<p>
Then click the Go button. <button onclick="go()">Go</button>  
</p>

<script>
hlib.createUserInputForm(hlib.getById('userContainer'));
hlib.createGroupInputForm(hlib.getById('groupContainer'));
if (! hlib.getToken()) {
  hlib.createApiTokenInputForm(hlib.getById('tokenContainer'));
}
</script>

</body>
</html>
